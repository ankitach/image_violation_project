{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Dashboard Page</title>
  
  <link rel="stylesheet" href={% static 'home_violation/css/bootstrap.css' %}>
  <link rel="stylesheet" href={% static 'css/ppe.css' %}>
  
    <title>Bootstrap demo</title>
   <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
   <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
   <script>
    $(document).ready(function(){
      $("#table").datatable();
    });
   </script>
  </head>
  <body>
    <section  id ="main">
      {% include 'navbar/navbar.html' %}
      {% include 'sidebar/sidebar.html' %}
      <div class="row">
        <div class="col-lg-4">
          <div class="row">
              <div class="col-lg-6">
                <div class="card_wrapper_info">
                    <div class="card_content_details">
                    </div>
                </div>
              </div>
              <div class="col-lg-6">
                <div class="card_wrapper_info">
                  <div class="card_content_details"> 
                  </div>
              </div>
              </div>
              <div class="col-lg-6">
                <div class="card_wrapper_info">
                  <div class="card_content_details">
                    <h3>{{ count }} </h3>
                    <p class="text-center">Total compaint</p>
                  </div>
              </div>
              </div>
              <div class="col-lg-6">
                <div class="card_wrapper_info">
                  <div class="card_content_details">
                    <h3> {{ count }} </h3>
                    <p class="text-center">Total Resolved</p>
                  </div>
              </div>
              </div>
          </div>
        </div>
        <div class="col-lg-8">
            <div id="img_repore_id" class="repoer_card_img">
              <img src={% static 'Camera-1/' %} class="img-responsive" id='iii'>
            </div>
        </div>
      </div>
        <section   class="section dashboard">
          <!-- Recent Sales -->
          <div id="sec" class="col-12">
            <div class="card recent-sales overflow-auto">
              <div class="filter">
                <a class="icon" href="#" data-bs-toggle="dropdown">
                  <svg xmlns="http://www.w3.org/2000/svg"
                  width="16" height="16" fill="currentColor"
                  class="bi bi-three-dots" viewBox="0 0 16 16">
                  <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                  </svg></a>
                <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow"  >
                  <li class="dropdown-header text-start">
                    <h6>Locations</h6>
                  </li>
                  {% for x1 in loc1 %}
                  {% comment %} {% for x1 in loc1 %} {% endcomment %}
                  
                  <li  class="sub_dropmenu">
                    <a class="dropdown-item loc dropdownsearch" name="cam_location" href="#">{{ x1.cam_location }}</a>
                    <ul  class=" list_submenu" id="drop_menusection">
                      {% for x2 in loc1 %}
                      <a class="dropdownn-item menu-1"  name="camera" onclick="filter_emp('{{ x1.cam_location }},{{x2.camera}}')" href="#">{{x2.camera}}</a>
                      {% endfor %}
                    </ul>
                    {% endfor %}
                    </a>
                  </li> 
                </ul>
              </div> 
              {% comment %} ###################################################################################################
              {% comment %} <div class=filter>
                <form  method="post">
                  {% csrf_token %}
                  <label for="location">Location</label><br>
                  <input type="text" id="cam_location" name="cam_location" value="{{ cam_location }}"><br>
                  <label for="camera">Camera</label><br>
                  <input type="text" id="camera" name="camera" value="{{ camera }}"><br>
                  <hr>
                  <button type="submit" class="btn btn-light">Submit</button>
              </form>
              </div> {% endcomment %}
              {% comment %} ################################################################################################### {% endcomment %}

              <div  class="card-body">
                <h5 class="card-title">Today's Violation</h5>
                <table id="table" class="table table-borderless datatable">
                  <thead>
                    <tr>
                      <th scope="col">ID</th>
                      <th scope="col">Date</th>
                      <th scope="col">Time</th>
                      <th scope="col">Location</th>
                      <th scope="col">Camera Number</th>
                    </tr>
                    {% for x in via1 %}
                    <tr>
                      <td>{{x.id}}</td>
                      <td>{{x.viol_date}}</td>
                      <td>{{x.viol_time}}</td>
                      <td><a onclick="showImage('{{x.violations}}')"> {{x.violations}}</a></td>                      
                      <td>{{x.viol_Camera_id}}</td>
                    </tr>
                    {% endfor %} 
                  </tbody>
                  
                </table>
                <div class="pagination">
                  <span class="step-links">
                      {% if via1.has_previous %}
                          <a href="?page=1">&laquo; first</a>
                          <a href="?page={{ via1.previous_page_number }}">previous</a>
                      {% endif %}
                      <span class="current">
                          Page {{ via1.number }} of {{ via1.paginator.num_pages }}.
                      </span>
                      {% if via1.has_next %}
                          <a href="?page={{ via1.next_page_number }}">next</a>
                          <a href="?page={{ via1.paginator.num_pages }}">last &raquo;</a>
                      {% endif %}
                  </span>
                </div>

              </div>

            </div>
          </div>
        </section>
          <!-- End Recent Sales --> 
    </section>
    <script>
      function showImage(imageSrc) {
        console.log('RRRRRR',imageSrc);
        var imageContainer = document.getElementById("img_repore_id");
        var path= '/static/Camera-1/'+imageSrc;
        imageContainer.innerHTML = '<img src="' + path + '" alt="Selected Image">';
        imageContainer.classList.add("active");
        
      }
      </script>
      <script src="{% static 'home_violation/js/bootstrap.js' %}"></script> 
      <script src="{% static 'js/popper.min.js' %}"></script> 
      <script src="{% static 'https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js' %}"></script> 
  </body>
</html> 
